<tool id="feht" name="feht" version="0.1.0">
    <description>A commandline program to automatically identify makers predictive of groups.</description>
    <requirements>
        <requirement type="package" version="1.0.1">feht</requirement>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
        feht --info=$metadata --datafile=$data_file --mode=$binary_or_snp > output.txt
    ]]></command>
    <inputs>
        <param name="metadata" type="data" format="txt, csv" label="Delimited Metadata Input"/>
        <param name="data_file" type="data" format="txt, csv" label="Datafile Input"/>
        <param name="binary_or_snp" type="select" label="Pick Binary or SNP">
          <option value="binary">Binary</option>
          <option value="snp">SNP</option>
        </param>
        <param name="delimiter_type" type="select" label="Metadata's delimiter type">
          <option value=",">Comma (,)</option>
          <option value="\t">Tab (\t)</option>
        </param>
    </inputs>
    <outputs>
        <data format="data" name="output.txt" from_work_dir="output.txt" label="output.txt"/>
    </outputs>
    <tests>
        <test>
            <param name="metadata" value="test_metadata.txt"/>
            <param name="data_file" value="test_snps.txt"/>
            <param name="binary_or_snp" value="snp"/>
            <param name="delimiter_type" value="\t"/>
            <output name="output.txt" value="output.txt"/>
        </test>
    </tests>
    <help><![CDATA[


********************************************************************
  feht -- automatic identification of markers predictive of groups
********************************************************************
        
        A commandline program to automatically identify markers predictive of groups. Can be used with binary data, genomic (single nucleotide variant) data, or arbitrary character data.


        ## Quick Start

        There should honestly be a quickstart section but alas, there's nothing here.

        ## Descriptiion

        The program takes command line arguments, 3 of which are required. For example:

            ./feht --info=data/metadata.txt --datafile=data/data.tab --mode="snp" > output.txt
         
        Files can be either tab-delimited, or comma-delimited. The default is tab, but it can be changed by including
         
            --delimiter=","
                     
        in the command line options. Both the metadata file and the datafile must use the same delimiter.
         
        The info file is the delimited metadata, where the column headers denote the metadata categories, the row labels denote the subject names (which must exactly match the names in the datafile), and the cells are values for the metadata category for a given subject.
         
        The datafile is the actual data, where the column headers denote the subject names (which must exactly match the row labels in the info file), the row labels denote the factor name (which must be unique), and the cells are the factors for a particular subject. If the factors represent binary data, this can be specified as:

            --mode="binary"
         
        If the mode is set as “snp”, using:
         
            --mode="snp"
         
         then the factors are assumed to be genetic data of A, C, T, or G, and each of A vs not-A, C vs not-C, T vs not T, G vs not-G are computed, and (_c, _t, _g, _a) is appended to the factor name in the results, to denote the comparison that was significant.
         
        There are two additional, optional arguments: `--one`, and `--two`, which are used to specify the Metadata Category and values for groups of interest. If neither `--one` nor `--two` are specified, then all possible combinations for all metadata categories will be computed eg. if there is a Province column, then AB vs. not-AB, AB vs. BC, AB vs. SK, AB vs. MB ... will be computed, and this is done for every column in the `--info` file.
         
        If only `--one` is specified, then that group is compared against all others of the same category. Using our previous Province example, to compare AB and NB to a group consisting of all other provinces, the following would be run:

            ./feht --info=data/metadata.txt --datafile=data/data.tab --mode="snp" --one="Province AB NB" > output.txt
         
        The options given to --one must be quoted, and the first word must contain no spaces and be an exact match to a Column Name in the `--info` sheet, followed by space-separated values that should be included as part of the comparison group.
         
        The same applies to specifying arguments to `--two`, and if specified in addition to `--one`, only those two groups will be compared. For example:

            ./feht --info=data/metadata.txt --datafile=data/data.tab --mode="snp" --one="Province AB NB" --two="Province NS QC OE" > output.txt


            ]]></help>
    <citations>
        <citation type="bibtex">@ARTICLE{a1,
            title = {A commandline program to automatically identify markers predictive of groups. Can be used with binary data, genomic (single nucleotide variant) data, or arbitrary character data.},
            author = {Chad R. Laing},
            url = {https://github.com/chadlaing/feht}
            }
        }</citation>
    </citations>
</tool>